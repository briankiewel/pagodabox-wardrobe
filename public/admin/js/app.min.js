/*! Wardrobe 2013-06-05 */
this.JST=this.JST||{},this.JST["header/list/templates/header.html"]=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<div class="navbar navbar-inverse navbar-fixed-top">\n  <div class="navbar-inner">\n    <a class="brand" href="#">Wardrobe</a>\n    <ul class="nav">\n      <li class="active"><a class="write" href="#">Write</a></li>\n      <li><a  class="posts" href="#post">Posts</a></li>\n    </ul>\n  </div>\n</div>\n';return __p},this.JST["post/list/templates/empty.html"]=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<td colspan="5">No Posts</td>';return __p},this.JST["post/list/templates/grid.html"]=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<table class="table">\n	<thead>\n		<tr>\n			<th>ID</th>\n			<th>Title</th>\n			<th>Status</th>\n			<th>Created</th>\n			<th>Updated</th>\n			<th>Delete</th>\n		</tr>\n	</thead>\n	<tbody></tbody>\n</table>\n';return __p},this.JST["post/list/templates/item.html"]=function(obj){obj||(obj={});var __t,__p="";with(_.escape,obj)__p+='<td class="id">'+(null==(__t=id)?"":__t)+'</td>\n<td class="title"><a href="#" class="details">'+(null==(__t=title)?"":__t)+'</a></td>\n<td class="status">'+(null==(__t=1==active?"Active":"Draft")?"":__t)+'</td>\n<td class="date js-format-date" data-date="'+(null==(__t=created_at)?"":__t)+'">'+(null==(__t=created_at)?"":__t)+'</td>\n<td class="date js-format-date" data-date="'+(null==(__t=updated_at)?"":__t)+'">'+(null==(__t=updated_at)?"":__t)+'</td>\n<td class="actions"><button class="btn delete"><i class="icon-trash"></i></button></td>\n';return __p},this.JST["post/templates/form.html"]=function(obj){obj||(obj={});var __t,__p="";with(_.escape,obj)__p+='<form>\n	<div id="js-errors" class="hide">\n		<div class="alert alert-error">\n			<button type="button" class="close" data-dismiss="alert">×</button>\n			<span></span>\n		</div>\n	</div>\n	<div id="write">\n		<button class="btn large publish pull-right">'+(null==(__t=submitBtnText())?"":__t)+'</button>\n		<div class="info">\n			<div class="field">\n				<i data-dir="up" class="icon-chevron-sign-right js-toggle" title="Expand for options"></i>\n				<input type="text" style="width: 50%" name="title" id="title" value="" placeholder="Title">\n			</div>\n			<div class="details hide">\n				<div class="field">\n					<i class="icon-terminal" title="URI Slug"></i>\n					<input type="text" style="width: 50%" name="slug" id="slug" value="" placeholder="URI Slug">\n				</div>\n				<div class="field status">\n					<i class="icon-off" title="Status"></i>\n					<label class="radio"><input type="radio" name="active" class="js-active" value="1" checked> Published</label>\n					<label class="radio"><input type="radio" name="active" class="js-active" value="0"> Draft</label>\n				</div>\n				<div class="field">\n					<i class="icon-calendar" title="Publish Date"></i>\n					<input type="text" style="width: 50%" name="publish_date" id="publish_date" value="" placeholder="Publish Date">\n				</div>\n			</div>\n		</div>\n		<div class="content-area">\n			<textarea name="content" id="content" placeholder="Content Goes Here..."></textarea>\n			<div class="tags-bar hide">\n				<input type="text" id="js-tags" name="tags" class="tags" style="width: 90%" value="" placeholder="Tags">\n			</div>\n		</div>\n	</div>\n</form>\n';return __p},function(Backbone){var t,e;return e=Backbone.sync,Backbone.sync=function(n,i,r){var o;return null==r&&(r={}),_.defaults(r,{beforeSend:_.bind(t.beforeSend,i),complete:_.bind(t.complete,i)}),o=e(n,i,r),i._fetch||"read"!==n?void 0:i._fetch=o},t={beforeSend:function(){return this.trigger("sync:start",this)},complete:function(){return this.trigger("sync:stop",this)}}}(Backbone),$.fn.formatDates=function(){var t;return t=$(this),t.each(function(){var t,e,n,i;return e=$(this),t=e.data("format"),n=e.data("date"),t===void 0&&(t="MMM Do YYYY, hh:mma"),i=isNaN(n)?moment.utc(n,"YYYY-MM-DD HH:mm:ss"):moment.unix(n),e.text(i.local().format(t))})},$.fn.fillJSON=function(t){var e,n,i;e=$(this);for(n in t){if(i=t[n],"active"===n)return this;e.find("[name='"+n+"']").val(i)}},$.fn.showAlert=function(t,e,n){var i,r;return i=$(this),r="<div class='alert alert-block "+n+"'>    <button type='button' class='close' data-dismiss='alert'>×</button>    <h4 class='alert-heading'>"+t+"</h4>    <p>"+e+"</p>  </div>",i.html(r).fadeIn(),"alert-success"===n?$(".alert").delay(3e3).fadeOut(400):void 0},function(Backbone){return _.extend(Backbone.Marionette.Application.prototype,{navigate:function(t,e){return null==e&&(e={}),Backbone.history.navigate(t,e)},getCurrentRoute:function(){var t;return t=Backbone.history.fragment,_.isEmpty(t)?null:t},startHistory:function(){return Backbone.history?Backbone.history.start():void 0},register:function(t,e){var n;return null==(n=this._registry)&&(this._registry={}),this._registry[e]=t},unregister:function(t,e){return delete this._registry[e]},resetRegistry:function(){var t,e,n,i,r;i=this.getRegistrySize(),r=this._registry;for(e in r)t=r[e],t.region.close();return n="There were "+i+" controllers in the registry, there are now "+this.getRegistrySize(),this.getRegistrySize()>0?console.warn(n,this._registry):console.log(n)},getRegistrySize:function(){return _.size(this._registry)}})}(Backbone);var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(function(Backbone,t){return t.Region.Dialog=function(t){function e(){_.extend(this,Backbone.Events)}return __extends(e,t),e.prototype.onShow=function(t){var e,n=this;return this.setupBindings(t),e=this.getDefaultOptions(_.result(t,"dialog")),this.$el.on("hidden",function(){return n.closeDialog()}),this.$el.on("shown",function(){return Snappy.execute("dialog:shown",t)}),this.$el.modal(e)},e.prototype.getDefaultOptions=function(t){return null==t&&(t={}),_.defaults(t,{backdrop:!0,keyboard:!0,show:!0,remote:!1,shown:null})},e.prototype.setupBindings=function(t){return this.listenTo(t,"dialog:close",this.closeDialog)},e.prototype.closeDialog=function(){return this.stopListening(),this.close(),this.$el.modal("hide")},e}(t.Region)})(Backbone,Marionette),Backbone.Marionette.Renderer.render=function(t,e){var n;if(n=JST[t+".html"],!n)throw"Template "+t+" not found!";return n(e)},this.Wardrobe=function(Backbone){var t;return t=new Backbone.Marionette.Application,t.on("initialize:before",function(){return t.environment=$("meta[name=env]").attr("content")}),t.addRegions({headerRegion:"#header-region",topnavRegion:"#top-region",mainRegion:"#main-region",footerRegion:"footer-region"}),t.addInitializer(function(){return t.module("HeaderApp").start()}),t.reqres.setHandler("default:region",function(){return t.mainRegion}),t.commands.setHandler("register:instance",function(e,n){return"local"===t.environment?t.register(e,n):void 0}),t.commands.setHandler("unregister:instance",function(e,n){return"local"===t.environment?t.unregister(e,n):void 0}),t.on("initialize:after",function(){return this.startHistory()}),t}(Backbone,Marionette),this.Wardrobe.module("Entities",function(t,e,Backbone,n,i,r){return e.commands.setHandler("when:fetched",function(t,e){var n;return n=r.chain([t]).flatten().pluck("_fetch").value(),i.when.apply(i,n).done(function(){return e()})})});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("Entities",function(t,e,Backbone){return t.Collection=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.initialize=function(t,e){return e||(e={}),this.bind("error",this.defaultErrorHandler),this.init&&this.init(t,e)},e.prototype.defaultErrorHandler=function(t,e){switch(e.status){case 401:return document.location.href="/wardrobe/login"}},e}(Backbone.Collection)});var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("Entities",function(t,e,Backbone,n,i,r){return t.Model=function(t){function e(){return this.saveError=__bind(this.saveError,this),this.saveSuccess=__bind(this.saveSuccess,this),e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.initialize=function(t,e){return e||(e={}),this.bind("error",this.defaultErrorHandler),this.init&&this.init(t,e)},e.prototype.defaultErrorHandler=function(t,e){switch(e.status){case 401:return document.location.href="/wardrobe/login"}},e.prototype.destroy=function(t){return null==t&&(t={}),r.defaults(t,{wait:!0}),this.set({_destroy:!0}),e.__super__.destroy.call(this,t)},e.prototype.isDestroyed=function(){return this.get("_destroy")},e.prototype.save=function(t,n){var i;return null==n&&(n={}),i=this.isNew(),r.defaults(n,{wait:!0,success:r.bind(this.saveSuccess,this,i,n.collection),error:r.bind(this.saveError,this)}),this.unset("_errors"),e.__super__.save.call(this,t,n)},e.prototype.saveSuccess=function(t,e){return t?(e&&e.add(this),e&&e.trigger("model:created",this),this.trigger("created",this)):(null==e&&(e=this.collection),e&&e.trigger("model:updated",this),this.trigger("updated",this))},e.prototype.saveError=function(t,e){return 404!==e.status?this.set({_errors:i.parseJSON(e.responseText)}):void 0},e}(Backbone.Model)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("Entities",function(t,e){var n;return t.Post=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.urlRoot="/api/post",e}(t.Model),t.PostCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return __extends(n,e),n.prototype.model=t.Post,n.prototype.url="/api/post",n}(e.Entities.Collection),n={getAll:function(){var e;return e=new t.PostCollection,e.fetch({reset:!0}),e},getPost:function(e){var n;return n=new t.Post({id:e}),n.fetch(),n},newPost:function(){return new t.Post}},e.reqres.setHandler("post:entities",function(){return n.getAll()}),e.reqres.setHandler("post:entity",function(t){return n.getPost(t)}),e.reqres.setHandler("new:post:entity",function(){return n.newPost()})});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("Entities",function(t,e){var n;return t.Tag=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.urlRoot="/api/tag",e}(t.Model),t.TagCollection=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return __extends(n,e),n.prototype.model=t.Tag,n.prototype.url="/api/tag",n}(e.Entities.Collection),n={getAll:function(e){var n;return n=new t.TagCollection,n.fetch({reset:!0,success:function(){return e?e(n):void 0},error:function(){throw Error("Tags not fetched")}}),n}},e.reqres.setHandler("tag:entities",function(t){return n.getAll(t)})});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},__slice=[].slice;this.Wardrobe.module("Controllers",function(t,e,Backbone,n,i,r){return t.Base=function(t){function n(t){null==t&&(t={}),this.region=t.region||e.request("default:region"),n.__super__.constructor.call(this,t),this._instance_id=r.uniqueId("controller"),e.execute("register:instance",this,this._instance_id)}return __extends(n,t),n.prototype.close=function(){var t;return t=arguments.length>=1?__slice.call(arguments,0):[],delete this.region,delete this.options,n.__super__.close.call(this,t),e.execute("unregister:instance",this,this._instance_id)},n.prototype.show=function(t){return this.listenTo(t,"close",this.close),this.region.show(t)},n}(n.Controller)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("Views",function(t,e,Backbone,n){return t.CollectionView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.itemViewEventPrefix="childview",e}(n.CollectionView)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("Views",function(t,e,Backbone,n){return t.CompositeView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.itemViewEventPrefix="childview",e}(n.CompositeView)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("Views",function(t,e,Backbone,n){return t.ItemView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.fillJSON=function(){var t;return this.$("form").fillJSON((null!=(t=this.model)?t.toJSON():void 0)||{})},e}(n.ItemView)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("Views",function(t,e,Backbone,n){return t.Layout=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(n.Layout)});var __slice=[].slice;this.Wardrobe.module("Views",function(t,e,Backbone,n,i,r){var o;return o=n.View.prototype.remove,r.extend(n.View.prototype,{remove:function(){var t,e,n=this;return t=arguments.length>=1?__slice.call(arguments,0):[],console.log("removing",this),(null!=(e=this.model)?e.isDestroyed():void 0)?this.$el.fadeOut(400,function(){return o.apply(n,t)}):o.apply(this,t)}})});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("Views",function(t,e,Backbone,n,i,r){return t.PostView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return __extends(n,t),n.prototype.template="post/templates/form",n.prototype.initialize=function(){return this.tagsShown=!1},n.prototype.events={"click .publish":"save","click .js-toggle":"toggleDetails","click .icon-tags":"toggleTags","change .js-active":"changeBtn"},n.prototype.modelEvents={"change:_errors":"changeErrors"},n.prototype.templateHelpers={submitBtnText:function(){return null==this.active,"1"===this.active?"Publish Post":"Save Post"}},n.prototype.onShow=function(){return this.setUpEditor(),this.setUpTags(),this.model.isNew?(i("#slug").slugify("#title"),this.$("#publish_date").val(moment().format("YYYY-MM-DD HH:mm:ss"))):void 0},n.prototype.setUpEditor=function(){var t;return t=["bold","italic","|","quote","unordered-list","ordered-list","|","link","image","|","undo","redo","|","tags"],this.editor=new Editor({toolbar:t}),this.editor.render(document.getElementById("content")),this.$(".editor-statusbar").find(".lines").html(this.editor.codemirror.lineCount()).find(".words").html(this.editor.codemirror.getValue().length).find(".cursorActivity").html(this.editor.codemirror.getCursor().line+":"+this.editor.codemirror.getCursor().ch)},n.prototype.setUpTags=function(){var t=this;return e.request("tag:entities",function(e){return t.$("#js-tags").selectize({persist:!0,maxItems:null,valueField:"tag",labelField:"tag",searchField:["tag"],options:e.toJSON(),render:{item:function(t){return"<div><i class='icon-tag'></i> "+t.tag+"</div>"},option:function(t){return"<div><i class='icon-tag'></i> "+t.tag+"</div>"}},create:function(t){return{tag:t}}})})},n.prototype.toggleTags=function(){return this.tagsShown?(this.$(".editor-toolbar a, .editor-toolbar i").show(),this.$(".tags-bar").hide()):(this.$(".editor-toolbar a, .editor-toolbar i").hide(),this.$(".icon-tags").show(),this.$(".tags-bar").show(),this.$("js-tags").focus()),this.tagsShown=!this.tagsShown},n.prototype.save=function(t){var e;return t.preventDefault(),e={title:this.$("#title").val(),slug:this.$("#slug").val(),active:this.$("input[type=radio]:checked").val(),content:this.editor.codemirror.getValue(),tags:this.$("#js-tags").val(),publish_date:this.$("#publish_date").val()},this.processFormSubmit(e)},n.prototype.processFormSubmit=function(t){return this.model.save(t,{collection:this.collection})},n.prototype.changeErrors=function(t,e){return r.isEmpty(e)?this.removeErrors():this.addErrors(e)},n.prototype.addErrors=function(t){var e,n,i;null==t&&(t={}),this.$("#js-errors").show().find("span").html("<strong>Error</strong> Please fix the following errors"),i=[];for(n in t)e=t[n],i.push(this.addError(e));return i},n.prototype.addError=function(t){var e;return e=i("<li>").text(t),this.$("#js-errors span").append(e)},n.prototype.removeErrors=function(){return this.$("#js-errors").hide()},n.prototype.collapse=function(t){return this.$toggle=t,this.$toggle.data("dir","up").addClass("icon-chevron-sign-right").removeClass("icon-chevron-sign-down"),this.$(".details.hide").hide()},n.prototype.expand=function(t){return this.$toggle=t,this.$toggle.data("dir","down").addClass("icon-chevron-sign-down").removeClass("icon-chevron-sign-right"),this.$(".details.hide").show()},n.prototype.toggleDetails=function(t){return this.$toggle=i(t.currentTarget),"up"===this.$toggle.data("dir")?this.expand(this.$toggle):this.collapse(this.$toggle)},n.prototype.changeBtn=function(t){return"1"===t.currentTarget.value?this.$(".publish").text("Publish Post"):this.$(".publish").text("Save Post")},n}(e.Views.ItemView)}),this.Wardrobe.module("HeaderApp",function(t,e){var n;return this.startWithParent=!1,n={list:function(){return new t.List.Controller({region:e.headerRegion})}},t.on("start",function(){return n.list()})});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("HeaderApp.List",function(t,e){return t.Controller=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return __extends(n,e),n.prototype.initialize=function(){var t;return t=this.getListView(),this.show(t)},n.prototype.getListView=function(){return new t.Header},n}(e.Controllers.Base)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("HeaderApp.List",function(t,e){return t.Header=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return __extends(n,t),n.prototype.template="header/list/templates/header",n.prototype.tagName="header",n.prototype.events={"click .write":"newPost"},n.prototype.newPost=function(t){return t.preventDefault(),e.vent.trigger("post:new:clicked")},n}(e.Views.ItemView)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("PostApp.Edit",function(t,e){return t.Controller=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return __extends(i,n),i.prototype.initialize=function(t){var n,i,r=this;return i=t.post,n=t.id,i||(i=e.request("post:entity",n)),this.listenTo(i,"updated",function(){return e.vent.trigger("post:updated",i)}),e.execute("when:fetched",i,function(){var t;return t=r.getEditView(i),r.show(t)})},i.prototype.getEditView=function(e){return new t.Post({model:e})},i}(e.Controllers.Base)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("PostApp.Edit",function(t,e,Backbone,n,i,r){return t.Post=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.onRender=function(){var t;return this.fillJSON(),t=r.pluck(this.model.get("tags"),"tag"),this.$("#js-tags").val(t),"1"===this.model.get("active")?(this.$(".publish").text("Publish Post"),this.$('input:radio[name="active"]').filter('[value="1"]').attr("checked",!0)):(this.$(".publish").text("Save Post"),this.$('input:radio[name="active"]').filter('[value="0"]').attr("checked",!0))},e}(e.Views.PostView)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("PostApp.List",function(t,e){return t.Controller=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return __extends(i,n),i.prototype.initialize=function(){var t,n=this;return t=e.request("post:entities"),e.execute("when:fetched",t,function(){var e;return e=n.getListView(t),n.show(e),n.listenTo(e,"childview:post:delete:clicked",function(t,e){var n;return n=e.model,confirm("Are you sure you want to delete "+n.get("title")+"?")?n.destroy():!1})})},i.prototype.getListView=function(e){return new t.Posts({collection:e})},i}(e.Controllers.Base)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("PostApp.List",function(t,e,Backbone,n,i){return t.PostItem=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return __extends(n,t),n.prototype.template="post/list/templates/item",n.prototype.tagName="tr",n.prototype.attributes=function(){return"1"===this.model.get("active")?{"class":"post-item"}:{"class":"post-item draft"}},n.prototype.triggers={"click .delete":"post:delete:clicked"},n.prototype.events={"click .details":"edit"},n.prototype.onShow=function(){return this.$(".js-format-date").formatDates()},n.prototype.edit=function(t){return t.preventDefault(),e.vent.trigger("post:item:clicked",this.model)},n.prototype.deletePost=function(t){return t.preventDefault(),confirm("Are you sure you want to delete this?")?this.model.destroy({success:function(){return i("#js-alert").showAlert("Success","The post is deleted.","alert-success")},error:function(t,e){return i("#js-alert").showAlert("Error",e.responseText(),"alert-error")}}):this},n}(e.Views.ItemView),t.Empty=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.template="post/list/templates/empty",e.prototype.tagName="tr",e}(e.Views.ItemView),t.Posts=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return __extends(n,e),n.prototype.template="post/list/templates/grid",n.prototype.itemView=t.PostItem,n.prototype.emptyView=t.Empty,n.prototype.itemViewContainer="tbody",n}(e.Views.CompositeView)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("PostApp.New",function(t,e){return t.Controller=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return __extends(i,n),i.prototype.initialize=function(){var t,n;return t=e.request("new:post:entity"),this.listenTo(t,"created",function(){return e.vent.trigger("post:created",t)}),n=this.getNewView(t),this.show(n)},i.prototype.getNewView=function(e){return new t.Post({model:e})},i}(e.Controllers.Base)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("PostApp.New",function(t,e){return t.Post=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.onRender=function(){return this.$(".publish").text("Publish Post")},e}(e.Views.PostView)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.Wardrobe.module("PostApp",function(t,e,Backbone,n,i){var r;return t.Router=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.appRoutes={"":"add",post:"list","post/add":"add","post/edit/:id":"edit"},e}(n.AppRouter),r={list:function(){return this.setActive(),new t.List.Controller},add:function(){return this.setActive(".write"),new t.New.Controller},edit:function(e,n){return this.setActive(),new t.Edit.Controller({id:e,post:n})},setActive:function(t){return null==t&&(t=".posts"),i("ul.nav li").removeClass("active").find(t).parent().addClass("active")}},e.vent.on("post:load",function(){return e.navigate("post"),r.list()}),e.vent.on("post:created post:updated",function(){return i("#js-alert").showAlert("Success!","Post was successfully saved.","alert-success"),e.navigate("post"),r.list()}),e.vent.on("post:new:clicked",function(){return e.navigate("/"),r.add()}),e.vent.on("post:item:clicked",function(t){return e.navigate("post/edit/"+t.id),r.edit(t.id,t)}),e.addInitializer(function(){return new t.Router({controller:r})})});